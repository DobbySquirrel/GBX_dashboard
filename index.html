<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vite App</title>
    <script>
      function loadBaiduMap() {
        return new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = `https://api.map.baidu.com/api?v=3.0&ak=%VITE_BAIDU_MAP_AK%&callback=initBaiduMap`;
          script.async = true;
          window.initBaiduMap = function() {
            resolve();
            delete window.initBaiduMap;
          };
          script.onerror = reject;
          document.head.appendChild(script);
        });
      }

      function loadTrackAnimation() {
        return new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = "//bj.bcebos.com/v1/mapopen/github/BMapGLLib/TrackAnimation/src/TrackAnimation.min.js";
          script.async = true;
          script.onload = resolve;
          script.onerror = reject;
          document.head.appendChild(script);
        });
      }

      Promise.all([loadBaiduMap(), loadTrackAnimation()])
        .catch(error => console.error('Failed to load map scripts:', error));
    </script>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
