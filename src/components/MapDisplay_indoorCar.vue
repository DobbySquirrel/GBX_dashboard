<template>
  <div>
    <div class="title-container">
      <el-text class="mx-1" style="font-size: 20px; color: #44652a"
        >Vehicle's Route</el-text
      >
    </div>
    <div id="container_indoorCar"></div>
  </div>
</template>

<script>
import * as echarts from "echarts";
import $ from "jquery";

export default {
  name: "MapDisplay",
  props: {
    OutdoorDeliveryCar_Property_OutdoorCarState: {
      type: String,
      default: null,
    },
    IndoorDeliveryCar_Property_IndoorCarState: {
      type: String,
      default: null,
    },
    DeliveryDrone_Property_DroneState: {
      type: String,
      default: null,
    },
  },
  mounted() {
    var dom = document.getElementById("container_indoorCar");
    var myChart = echarts.init(dom, null, {
      renderer: "canvas",
      useDirtyRect: false,
    });
    var app = {};
    var option;

    // Use the imported SVG file
    $.get('src/assets/hkust_map.svg', function (svg) {
      echarts.registerMap("hkust_map", { svg: svg });
      option = {
        tooltip: {},
        geo: {
          map: "hkust_map",
          roam: true,
          zoom: 2,
          label: {
              show: true,
            textBorderColor: "white", // Sets the border color to white
            textBorderWidth: 2, // Sets the border width
            },

            // center: [541.0076190419495, 379.867094445508],
        },
        projection: {
    projection: (pt) => project(pt)
},
//         series: [
//           {
//             type: "lines",
//             coordinateSystem: "geo",
//             geoIndex: 0,
//             polyline: true,
            
//             effect: {
//               show: true,
//               period: 8,
//               trailLength: 0,
//               constantSpeed: 80,
//               animationDelay:10,
//             },
//             data: [              {
//               lineStyle: {
//               color: "#73c0de",
//               width: 2,
//               opacity: 1,
//               type: "dotted",
//             },
//             effect:{
//               delay: 0,  
//               symbolSize: [14 , 12],
//               symbol:
//                 "path://M768 938.666667a42.666667 42.666667 0 1 1-42.666667-42.666667 42.713333 42.713333 0 0 1 42.666667 42.666667z m-426.666667-42.666667a42.666667 42.666667 0 1 0 42.666667 42.666667 42.713333 42.713333 0 0 0-42.666667-42.666667z m628.16-587.506667L825.72 632a85.413333 85.413333 0 0 1-78 50.666667H405.333333a21.333333 21.333333 0 0 1 0-42.666667h342.406667a42.713333 42.713333 0 0 0 38.993333-25.333333l140.44-316h-608.666666l-0.62-0.046667c-0.193333 0-0.386667-0.04-0.573334-0.066667s-0.306667-0.033333-0.453333-0.06-0.426667-0.066667-0.666667-0.106666l-0.38-0.066667c-0.22-0.04-0.433333-0.093333-0.666666-0.14l-0.366667-0.086667-0.626667-0.166666-0.386666-0.113334-0.573334-0.186666-0.426666-0.14-0.513334-0.193334-0.473333-0.193333-0.44-0.186667-0.533333-0.24-0.373334-0.186666-0.566666-0.286667-0.32-0.18-0.593334-0.34-0.293333-0.186667c-0.193333-0.12-0.386667-0.24-0.58-0.373333l-0.293333-0.2c-0.186667-0.133333-0.373333-0.26-0.553334-0.4l-0.326666-0.246667-0.486667-0.386666-0.426667-0.366667-0.366666-0.313333c-0.52-0.473333-1.02-0.973333-1.493334-1.493334l-0.313333-0.36-0.366667-0.433333c-0.133333-0.16-0.26-0.32-0.38-0.486667l-0.26-0.326666c-0.133333-0.18-0.26-0.366667-0.386666-0.553334s-0.14-0.193333-0.206667-0.293333-0.253333-0.386667-0.373333-0.58-0.126667-0.193333-0.186667-0.3-0.226667-0.38-0.333333-0.58l-0.186667-0.326667c-0.1-0.186667-0.186667-0.373333-0.28-0.553333s-0.133333-0.26-0.193333-0.393333-0.16-0.34-0.233334-0.513334l-0.2-0.453333-0.18-0.46-0.2-0.533333c-0.046667-0.133333-0.093333-0.266667-0.133333-0.4l-0.2-0.606667-0.1-0.353333c-0.06-0.22-0.12-0.433333-0.173333-0.666667l-0.08-0.333333c-0.053333-0.226667-0.1-0.453333-0.146667-0.666667 0-0.113333-0.04-0.226667-0.06-0.34-0.04-0.226667-0.086667-0.453333-0.12-0.666667s0-0.26-0.046667-0.386666-0.053333-0.426667-0.073333-0.666667-0.033333-0.346667-0.04-0.52-0.033333-0.346667-0.04-0.52V277.333333v-1c0-0.173333 0-0.346667 0.04-0.513333s0-0.353333 0.04-0.526667 0.046667-0.42 0.073333-0.633333 0.033333-0.26 0.046667-0.393333 0.073333-0.453333 0.12-0.666667c0-0.113333 0.033333-0.226667 0.06-0.34 0.046667-0.233333 0.093333-0.453333 0.146667-0.666667l0.08-0.34c0.053333-0.22 0.113333-0.433333 0.173333-0.666666s0.066667-0.246667 0.106667-0.366667 0.12-0.393333 0.186666-0.593333l0.14-0.406667 0.2-0.526667 0.18-0.466666 0.2-0.446667c0.073333-0.173333 0.153333-0.353333 0.233334-0.526667l0.186666-0.373333c0.093333-0.193333 0.186667-0.38 0.293334-0.566667s0.113333-0.213333 0.173333-0.32l0.34-0.593333c0.06-0.093333 0.12-0.186667 0.173333-0.28 0.126667-0.2 0.253333-0.4 0.386667-0.6 0.06-0.093333 0.126667-0.18 0.186667-0.266667l0.413333-0.58 0.22-0.286666c0.14-0.18 0.273333-0.353333 0.42-0.526667s0.2-0.24 0.306667-0.36 0.246667-0.286667 0.373333-0.433333 0.373333-0.393333 0.56-0.586667l0.16-0.173333L510.706667 56.46a32 32 0 0 1 45.253333 0L640 140.5l41.373333-41.373333a32 32 0 0 1 45.253334 0L883.5 256h51.88a37.333333 37.333333 0 0 1 34.113333 52.493333zM670.166667 170.666667l85.333333 85.333333h67.66L704 136.833333z m-298.666667 85.333333h323.666667L533.333333 94.166667zM789.333333 768H331.546667a42.666667 42.666667 0 0 1-42.086667-49.68l6.433333-38.573333a85.806667 85.806667 0 0 0-2.613333-39.126667L127.053333 100.393333A21.333333 21.333333 0 0 0 106.666667 85.333333H21.333333a21.333333 21.333333 0 0 0 0 42.666667h69.58l161.586667 525.166667a42.893333 42.893333 0 0 1 1.333333 19.56l-6.453333 38.606666a85.333333 85.333333 0 0 0 84.166667 99.333334H789.333333a21.333333 21.333333 0 0 0 0-42.666667z",
//                 },
//    coords: [[523.407661313191, 514.8920042011887], [487.4356544855982, 497.0804134882055], [519.6966477297246, 397.69914461206645],[541.0076190419495, 379.867094445508]],
//               },
//               {
//               lineStyle: {
//               color: "#91CC75",
//               width: 5,
//               opacity: 1,
//               type: "dotted",
//             },
//             effect:{
//               delay: 0,  
//               symbolSize: [14 , 12],
//               color: "#91CC75",
//               symbol:
//                 "path://M343.2 177.46C324.6 129.78 278.2 96 224 96c-70.7 0-128 57.3-128 128 0 54.2 33.78 100.6 81.46 119.2l76.94 101c-10 3.2-20 3.8-30.4 3.8C100.28 448 0 347.8 0 224 0 100.28 100.28 0 224 0c123.8 0 224 100.28 224 224 0 10.4-0.6 20.6-3.8 30.4l-101-76.94zM426.6 320h170.8l139.2-104.4c4-31.38 31-55.6 63.4-55.6 35.4 0 64 28.66 64 64 0 32.4-24.2 59.4-55.6 63.4L704 426.6v170.8l104.4 139.2c31.4 4 55.6 31 55.6 63.4 0 35.4-28.6 64-64 64-32.4 0-59.4-24.2-63.4-55.6L597.4 704h-170.8l-139.2 104.4c-4 31.4-31 55.6-63.4 55.6-35.34 0-64-28.6-64-64 0-32.4 24.22-59.4 55.6-63.4l104.4-139.2v-170.8l-104.4-139.2C184.22 283.4 160 256.4 160 224c0-35.34 28.66-64 64-64 32.4 0 59.4 24.22 63.4 55.6l139.2 104.4zM224 1024C100.28 1024 0 923.8 0 800s100.28-224 224-224c10.4 0 20.4 0.6 30.4 2l-76.94 102.8C129.78 699.4 96 745.8 96 800c0 70.6 57.3 128 128 128 54.2 0 100.6-33.8 119.2-81.4l101-77c3.2 10 3.8 20 3.8 30.4 0 123.8-100.2 224-224 224z m354-769.6c-1.4-10-2-20-2-30.4C576 100.28 676.2 0 800 0s224 100.28 224 224c0 123.8-100.2 224-224 224-10.4 0-20.4-0.6-30.4-3.8l77-101c47.6-18.6 81.4-65 81.4-121 0-68.9-57.4-128-128-128-54.2 0-100.6 35.58-119.2 83.26L578 254.4zM576 800c0-10.4 0.6-20.4 2-30.4l102.8 77c18.6 47.6 65 81.4 119.2 81.4 70.6 0 128-57.4 128-128 0-54.2-33.8-100.6-81.4-119.2L769.6 578c10-1.4 20-3.8 30.4-3.8 123.8 0 224 102 224 225.8 0 123.8-100.2 224-224 224s-224-100.2-224-224z",
//                 },
//    coords: [[541.0076190419495, 379.867094445508], [655.1858567669988, 52.11959089944139]],
//               },
//               {
//               lineStyle: {
//                 // #fac858
//               color: "grey",
//               width: 1,
//               opacity: 1,
//               type: "dotted",
//             },
//                 effect:{
//                delay: 0,  
//               symbolSize: [12, 12],            
//               symbol:
//                 "path://M768 938.666667a42.666667 42.666667 0 1 1-42.666667-42.666667 42.713333 42.713333 0 0 1 42.666667 42.666667z m-426.666667-42.666667a42.666667 42.666667 0 1 0 42.666667 42.666667 42.713333 42.713333 0 0 0-42.666667-42.666667z m628.16-587.506667L825.72 632a85.413333 85.413333 0 0 1-78 50.666667H405.333333a21.333333 21.333333 0 0 1 0-42.666667h342.406667a42.713333 42.713333 0 0 0 38.993333-25.333333l140.44-316h-608.666666l-0.62-0.046667c-0.193333 0-0.386667-0.04-0.573334-0.066667s-0.306667-0.033333-0.453333-0.06-0.426667-0.066667-0.666667-0.106666l-0.38-0.066667c-0.22-0.04-0.433333-0.093333-0.666666-0.14l-0.366667-0.086667-0.626667-0.166666-0.386666-0.113334-0.573334-0.186666-0.426666-0.14-0.513334-0.193334-0.473333-0.193333-0.44-0.186667-0.533333-0.24-0.373334-0.186666-0.566666-0.286667-0.32-0.18-0.593334-0.34-0.293333-0.186667c-0.193333-0.12-0.386667-0.24-0.58-0.373333l-0.293333-0.2c-0.186667-0.133333-0.373333-0.26-0.553334-0.4l-0.326666-0.246667-0.486667-0.386666-0.426667-0.366667-0.366666-0.313333c-0.52-0.473333-1.02-0.973333-1.493334-1.493334l-0.313333-0.36-0.366667-0.433333c-0.133333-0.16-0.26-0.32-0.38-0.486667l-0.26-0.326666c-0.133333-0.18-0.26-0.366667-0.386666-0.553334s-0.14-0.193333-0.206667-0.293333-0.253333-0.386667-0.373333-0.58-0.126667-0.193333-0.186667-0.3-0.226667-0.38-0.333333-0.58l-0.186667-0.326667c-0.1-0.186667-0.186667-0.373333-0.28-0.553333s-0.133333-0.26-0.193333-0.393333-0.16-0.34-0.233334-0.513334l-0.2-0.453333-0.18-0.46-0.2-0.533333c-0.046667-0.133333-0.093333-0.266667-0.133333-0.4l-0.2-0.606667-0.1-0.353333c-0.06-0.22-0.12-0.433333-0.173333-0.666667l-0.08-0.333333c-0.053333-0.226667-0.1-0.453333-0.146667-0.666667 0-0.113333-0.04-0.226667-0.06-0.34-0.04-0.226667-0.086667-0.453333-0.12-0.666667s0-0.26-0.046667-0.386666-0.053333-0.426667-0.073333-0.666667-0.033333-0.346667-0.04-0.52-0.033333-0.346667-0.04-0.52V277.333333v-1c0-0.173333 0-0.346667 0.04-0.513333s0-0.353333 0.04-0.526667 0.046667-0.42 0.073333-0.633333 0.033333-0.26 0.046667-0.393333 0.073333-0.453333 0.12-0.666667c0-0.113333 0.033333-0.226667 0.06-0.34 0.046667-0.233333 0.093333-0.453333 0.146667-0.666667l0.08-0.34c0.053333-0.22 0.113333-0.433333 0.173333-0.666666s0.066667-0.246667 0.106667-0.366667 0.12-0.393333 0.186666-0.593333l0.14-0.406667 0.2-0.526667 0.18-0.466666 0.2-0.446667c0.073333-0.173333 0.153333-0.353333 0.233334-0.526667l0.186666-0.373333c0.093333-0.193333 0.186667-0.38 0.293334-0.566667s0.113333-0.213333 0.173333-0.32l0.34-0.593333c0.06-0.093333 0.12-0.186667 0.173333-0.28 0.126667-0.2 0.253333-0.4 0.386667-0.6 0.06-0.093333 0.126667-0.18 0.186667-0.266667l0.413333-0.58 0.22-0.286666c0.14-0.18 0.273333-0.353333 0.42-0.526667s0.2-0.24 0.306667-0.36 0.246667-0.286667 0.373333-0.433333 0.373333-0.393333 0.56-0.586667l0.16-0.173333L510.706667 56.46a32 32 0 0 1 45.253333 0L640 140.5l41.373333-41.373333a32 32 0 0 1 45.253334 0L883.5 256h51.88a37.333333 37.333333 0 0 1 34.113333 52.493333zM670.166667 170.666667l85.333333 85.333333h67.66L704 136.833333z m-298.666667 85.333333h323.666667L533.333333 94.166667zM789.333333 768H331.546667a42.666667 42.666667 0 0 1-42.086667-49.68l6.433333-38.573333a85.806667 85.806667 0 0 0-2.613333-39.126667L127.053333 100.393333A21.333333 21.333333 0 0 0 106.666667 85.333333H21.333333a21.333333 21.333333 0 0 0 0 42.666667h69.58l161.586667 525.166667a42.893333 42.893333 0 0 1 1.333333 19.56l-6.453333 38.606666a85.333333 85.333333 0 0 0 84.166667 99.333334H789.333333a21.333333 21.333333 0 0 0 0-42.666667z",
//                 },
//    coords: [[655.1858567669988, 52.11959089944139],[523.407661313191, 514.8920042011887]],
//               },
//             ],
//           },
//           {
//       type: 'scatter',
//       coordinateSystem: 'geo',
//       geoIndex: 0,
//       symbol :'pin',
//       symbolSize: 40,
//       itemStyle: {
//         color: '#b02a02'
//       },
//       encode: {
//         tooltip: 2
//       },
//       label: {
//         show: true,
//         formatter: function(params) {
//           return params.data[2];
//         },
//         textBorderColor: "#b02a02", // Sets the border color to white
//         color: "white", // Sets the border color to white
//         textBorderWidth: 2, // Sets the border width
//       },
//       data: [
// [523.407661313191, 514.8920042011887, "E3 Lab"],
// [541.0076190419495, 379.867094445508, "Helipad"],
// [655.1858567669988, 52.11959089944139, "Locker"]
//       ]
//     }
//         ],
      };
      myChart.setOption(option);
    });

    // Resize chart when window size changes
    window.addEventListener("resize", myChart.resize);
  },
};
</script>

<style scoped>
#container_indoorCar {
  width: 100%;
  height: 550px;
}
.title-container {
  text-align: center;
  font-weight: bold;
}
</style>
